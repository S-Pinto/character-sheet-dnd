/* --- NUOVO DESIGN RESPONSIVE --- */

/* Import dei Font da Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Lato:wght@400;700&display=swap');

:root {
    --font-header: 'Cinzel', serif; /* Font epico per i titoli */
    --font-body: 'Lato', sans-serif; /* Font pulito per il testo */
    
    /* Nuova Palette Dark Mode */
    --c-bg: #1a1a2e; /* Sfondo blu notte scuro */
    --c-surface: #16213e; /* Superficie delle box, leggermente più chiara */
    --c-surface-light: #2c3e50; /* Sfondo per elementi interni */
    --c-text: #e0e0e0; /* Testo quasi bianco, ma non affaticante */
    --c-label: #a7a7a7; /* Etichette e testo secondario */
    --c-primary: #9b59b6; /* Viola acceso come colore principale */
    --c-secondary: #3498db; /* Blu per elementi secondari */
    --c-success: #2ecc71;
    --c-danger: #e74c3c;
    --c-border: #0f3460; /* Bordo scuro e desaturato */

    --border-radius: 8px;
    --shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

body {
    font-family: var(--font-body);
    background-color: var(--c-bg);
    color: var(--c-text);
    margin: 0;
    padding: 1.5rem;
    transition: background-color 0.3s;
}

.container {
    max-width: 1600px;
    margin: auto;
}

/* Header */
#main-header-grid {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
    align-items: center;
}
#portrait-container img {
    width: 100%;
    height: 100%;
    max-height: 400px;
    object-fit: cover;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    border: 3px solid var(--c-primary);
}
#character-name-display {
    font-family: var(--font-header);
    font-size: 4rem;
    color: var(--c-text);
    margin: 0;
    text-shadow: 0 0 10px var(--c-primary);
}
.btn {
    background-color: var(--c-primary);
    color: white; border: none; padding: 0.75rem 1.5rem; border-radius: var(--border-radius);
    cursor: pointer; font-weight: bold; transition: all 0.2s;
}
.btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
.btn.save-btn { background-color: var(--c-success); }

#details-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* Modificato a 4 colonne */
    gap: 1rem;
    margin-top: 1rem;
    background: var(--c-surface);
    padding: 1rem;
    border-radius: var(--border-radius);
}
.detail-box { text-align: center; }
.detail-box .view-item, .detail-box .edit-item { font-size: 1.2rem; font-weight: bold; color: white; }
.detail-box label { font-size: 0.8rem; text-transform: uppercase; color: var(--c-label); }

/* Sezione Caratteristiche Orizzontale */
#abilities-horizontal-container {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
}
.ability-box {
    background: var(--c-surface); padding: 1rem; border-radius: var(--border-radius);
    text-align: center; box-shadow: var(--shadow); border: 1px solid var(--c-border);
    display: flex;
    flex-direction: column;
}
.ability-header {
    border-bottom: 2px solid var(--c-border);
    padding-bottom: 1rem;
    margin-bottom: 1rem;
}
.ability-box h3 {
    font-family: var(--font-header); font-size: 1.8rem; margin: 0;
    color: var(--c-secondary);
}
.ability-score { font-size: 2.5rem; font-weight: bold; color: white; }
.ability-modifier { font-size: 1.2rem; color: var(--c-label); }

/* Nuova Sezione Skill */
.skill-list {
    list-style: none;
    padding: 0;
    margin: 0;
    text-align: left;
}
.skill-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    font-size: 0.9em;
}
.skill-list .skill-prof {
    margin-right: 0.5rem;
}
.skill-list .skill-name {
    flex-grow: 1;
}

/* Griglia Contenuto Principale */
#main-content-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    align-items: start;
}
.box {
    background-color: var(--c-surface);
    border-radius: var(--border-radius);
    padding: 1.5rem;
    box-shadow: var(--shadow);
    border: 1px solid var(--c-border);
}
.box h2 {
    font-family: var(--font-serif); margin-top: 0; margin-bottom: 1rem;
    color: var(--c-primary); border-bottom: 2px solid var(--c-border); padding-bottom: 0.5rem;
}

/* Carte Attacco Personalizzate */
#attacks-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}
.attack-card {
    border: 1px solid var(--c-border);
    border-left: 5px solid var(--c-danger);
    border-radius: var(--border-radius);
    padding: 1rem;
    background-color: var(--c-surface-light);
    position: relative;
}
.attack-card h4 {
    font-family: var(--font-header); font-size: 1.8rem; color: var(--c-danger);
    margin: 0 0 0.5rem 0; letter-spacing: 1px;
}
.attack-stats { display: flex; gap: 1rem; margin-bottom: 0.5rem; font-weight: bold; }
.attack-notes { font-size: 0.9em; font-style: italic; color: var(--c-label); }

/* Stile input/textarea */
input[type="text"], input[type="number"], textarea {
    background-color: #2c3e50;
    color: var(--c-text);
    border: 1px solid var(--c-secondary);
    border-radius: 4px;
    padding: 0.5rem;
    width: 100%;
    box-sizing: border-box;
}
input:focus, textarea:focus { outline: 2px solid var(--c-primary); }

/* Modalità Modifica */
.view-item { display: inline-block; }
.edit-item { display: none; }
.view-mode .edit-item { display: none; }
.edit-mode .view-item { display: none; }
.edit-mode .edit-item { display: block; }
.edit-mode .skill-prof { display: inline-block; }
.view-mode .skill-prof { display: none; }

/* Feedback di Salvataggio */
#save-feedback {
    color: var(--c-success); font-weight: bold; margin-right: 1rem;
    opacity: 0; transition: opacity 0.5s;
}
#save-feedback.visible { opacity: 1; }

/* ------------------------- */
/* --- DESIGN RESPONSIVE --- */
/* ------------------------- */

/* Tablet (fino a 1200px) */
@media (max-width: 1200px) {
    #main-content-grid {
        grid-template-columns: 1fr 1fr; /* 2 colonne per i box principali */
    }
    #abilities-horizontal-container {
        grid-template-columns: repeat(3, 1fr); /* 3 abilità per riga */
    }
}

/* Smartphone (fino a 768px) */
@media (max-width: 768px) {
    body { padding: 0.5rem; }
    #main-header-grid,
    #abilities-horizontal-container,
    #main-content-grid {
        grid-template-columns: 1fr; /* Tutto in una singola colonna */
    }
    #main-header-grid {
        text-align: center;
    }
    #name-and-controls {
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }
    #character-name-display {
        font-size: 3rem;
    }
    .box {
        padding: 1rem;
    }
    .attack-stats {
        flex-direction: column;
        gap: 0.25rem;
    }
}